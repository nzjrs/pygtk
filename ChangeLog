2006-07-22  John Finlay  <finlay@moeraki.com>

	* codegen/reversewrapper.py (VoidReturn.write_conversion) 
	(DoubleReturn.write_conversion, GBoxedReturn.write_conversion): Use
	failure_exception instead of failure_cleanup
	(GtkTreePathReturn): Add.

	* gtk/gdk-base.defs (get_display_name, get_n_screens, get_screen) 
	(get_default_screen, closed): Add GdkDisplay virtual defs
	(create_gc, draw_rectangle, draw_arc, draw_polygon, draw_text) 
	(draw_text_wc, draw_drawable, draw_points, draw_segments) 
	(draw_lines, draw_glyphs, draw_image, get_depth, get_size) 
	(set_colormap, get_colormap, get_visual, get_screen, get_image) 
	(get_clip_region, get_visible_region, get_composite_drawable) 
	(draw_pixbuf, draw_glyphs_transformed, draw_trapezoids) 
	(ref_cairo_surface): Add GdkDrawable virtual defs
	(get_values, set_values, set_dashes): Add GdkGC virtual defs
	(direction_changed, keys_changed): Add GdkKeymap virtual defs
	(size_changed): Add GdkScreen virtual def
	(gdk_pixbuf_animation_ref, pixbuf_animation_unref): Add
	GdkPixbufAnimation method defs
	(non_anim_new, is_static_image, get_static_image, get_size) 
	(get_iter): Add GdkPixbufAnimation method and virtual defs with
	GDK_PIXBUF_ENABLE_BACKEND ifdef
	(get_delay_time, get_pixbuf, on_currently_loading_frame, advance): Add
	GdkPixbufAnimationIter virtual defs with GDK_PIXBUF_ENABLE_BACKEND
	ifdef
	(pixbuf_error_quark, pixbuf_get_type, ref, unref)
	(pixbuf_new_from_file_at_scale, save_to_callbackv) 
	(save_to_buffer, save_to_bufferv): Add misc GdkPixbuf method and
	function defs
	(is_scalable, is_disabled, set_disabled, get_license): Add
	GdkPixbufFormat methods defs
	(set_option): Add GdkPixbuf method def with GDK_PIXBUF_ENABLE_BACKEND
	ifdef
	(size_prepared, area_prepared, area_updated, closed): Add
	GdkPixbufLoader virtual defs
	(serialize, deserialize, from_pixbuf, pixbuf_from_pixdata) 
	(to_csource): Add GdkPixdata method and function defs

	* gtk/gdk-2.10.defs (composited_changed): Add GdkScreen virtual def

	* gtk/gdk.override (gdk_pixbuf_from_pixdata, gdk_pixdata_*): Ignore

	* codegen/reversewrapper.py (GdkRegionPtrReturn): Add.

2006-07-22  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* Makefile.am (SUBDIRS): Make --disable-docs really work.

2006-07-22  John Finlay  <finlay@moeraki.com>

	* gtk/gdk-base.defs (gdk_pixbuf_simple_anim_add_frame) 
	(pixbuf_simple_anim_new, pixbuf_simple_anim_iter_get_type) 
	(pixbuf_simple_anim_get_type, gdk_pixbuf_flip): Add

	* gtk/gdk.override: Add #define for GDK_TYPE_PIXBUF_SIMPLE_ANIM_ITER.

	* gtk/gdk-base-types.defs (PixbufSimpleAnim) 
	(PixbufSimpleAnimIter, PixbufRotation): Add.

2006-07-20  Johan Dahlin  <johan@gnome.org>

	* gtk/gdk-base.defs:
	Remove the leading gdk_ from a few functions.

2006-07-20  John Finlay  <finlay@moeraki.com>

	* docs/Makefile.am: Make builddate.xml dependent on REFERENCE_DEPS.
	Make version.xml dependent on config.h. Add builddate.xml to pdf and
	build-stamp dependencies. Clean pdf files.

2006-07-20  Johan Dahlin  <jdahlin@async.com.br>

	* configure.ac:
	* docs/Makefile.am:
	* docs/reference/.cvsignore:
	* docs/reference/version.xml.in:
	Generate builddate.xml and version.xml at build time instead on
	configure time, add proper dependencies.

2006-07-20  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* gtk/gtk-base.defs (lookup_icon, load_icon): Caller owns return.
	Fixes leaks.

2006-07-20  John Finlay  <finlay@moeraki.com>

	* gtk/gtk.override (GtkObject__do_set_arg, GtkObject__do_get_arg)
	(GtkObject__proxy_do_set_arg, GtkObject__proxy_do_get_arg): Ignore.
	#341633 (Johan Dahlin)

	* gtk/gtk-types.c (pygtk_tree_model_row_getitem) 
	(pygtk_tree_model_row_setitem): Remove negative index readjustment
	code. #311852 (Baiju M)

	* codegen/codegen.py (Coverage.printstats): Fix typo.
	#341668 (Yevgen Muntyan)

2006-07-19  John Finlay  <finlay@moeraki.com>

	* gtk/gtktreeview.override (_wrap_gtk_tree_store_insert): Fix typo

	* docs/Makefile.am: Use more portable date generator.

2006-07-19  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gtkmodule.c (init_gtkimpl): Don't register constants
	* codegen/codegen.py: Make enum/flags lazily created too.

	* gtk/__init__.py:
	* gtk/deprecation.py:
	Make functions lazily loaded.
	Make deprecation lazy too, to avoid refercing anything until it's called.

2006-07-19  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* atk.override (_wrap_atk_editable_text_set_run_attributes): Don't
	ignore g_slist_append return value.

2006-07-19  Rafael Espíndola <rafael.espindola@gmail.com>

	reviewed by: Gustavo Carneiro

	* codegen/codegen.py: Mark generated PyTypeObject structures with
	G_GNUC_INTERNAL to reduce the size of the PLT.  Fixes #347825.

2006-07-19  John Finlay  <finlay@moeraki.com>

	* docs/fixxref.py: Add utility to fix links to pygobject docs.

	* docs/Makefile.am : Add reference/version.xml and
	reference/builddate.xml for auto generated version and build date for
	docs

	* docs/common.xsl:
	* docs/devhelp.xsl:
	* docs/html-style.xsl:
	* docs/html.xsl: Remove.

	* configure.in (AC_CONFIG_FILES): Add docs/reference/version.xml

2006-07-18  Johan Dahlin  <johan@gnome.org>

	* docs/Makefile.am (HTMLdir): Install book in $datadir/gtk-doc/html

2006-07-18  John Finlay  <finlay@moeraki.com>

	* gtk/gtktreeview.override (pygtk_cell_data_func_marshal)
	(pygtk_tree_selection_foreach_marshal, pygtk_tree_sortable_sort_cb)
	(pygtk_tree_foreach_marshal, pygtk_tree_model_filter_visible_cb)
	(pygtk_filter_modify_func_marshal)
	(pygtk_set_search_equal_func_marshal): Don't copy TreeIter when passing
	to callback. #347273 (Stefano Maggiolo)
	(_wrap_gtk_tree_selection_set_select_function): Optionally provide full
	info to callback. #340475 (Wouter Bolsterlee)

2006-07-17  John Finlay  <finlay@moeraki.com>

	* gtk/gtktreeview.override: 
	(_wrap_gtk_tree_store_set_column_types): Add.
	(_wrap_gtk_tree_store_insert): Use gtk_tree_store_insert_with_valuesv.

	* gtk/_lazyutils.py (LazyNamespace.__getattribute__): Allow
	'from gtk import *' to work

2006-07-17  Johan Dahlin  <johan@gnome.org>

	* configure.in:
	* docs/.cvsignore:
	* docs/Makefile.am:
	* docs/reference/pygtk2-ref.xml:

	Add non GObject parts of John Finlays reference manual

2006-07-17  John Finlay  <finlay@moeraki.com>

	* codegen/reversewrapper.py (GBoxedReturn.write_conversion): Specify
	code arg is None

	* gtk/gtk-2.10.defs: Add additional virtual defs.

	* gtk/gtk-base.defs: Add additional virtual defs.

2006-07-14  John Finlay  <finlay@moeraki.com>

	* Makefile.am (.defs.c): Allow libglade and gtkunixprint code
	generation in place.

2006-07-13  John Finlay  <finlay@moeraki.com>

	* gtk/gtk-2.10-types.defs (TargetList): Move from
	gtk/gtk-base-types.defs

	* gtk/gtk-base-types.defs (AccelMap): Add. #337011 (Sebastian Pölsterl)
	(TipsQuery, TargetList, TreePath, FileInfo, FilePath): Add.

	* gtk/gtk.override (_wrap_gtk_accel_map_foreach)
	(_wrap_gtk_accel_map_foreach_unfiltered): Add.
	Fixes #337011 (Sebastian Pölsterl)
	(GtkTipsQuery, GtkTargetList, GtkTreePath, GtkFileInfo, GtkFilePath):
	Ignore types.

	* codegen/codegen.py (SourceWriter.write_registers): Don't write
	registers for ignored types.
	(SourceWriter.write_type_declarations): Don't write type declarations
	for ignored types.

2006-07-13  Johan Dahlin  <jdahlin@async.com.br>

	* codegen/codegen.py:
	* codegen/defsparser.py:
	* configure.in:
	* gtk/Makefile.am:
	* gtk/__init__.py:
	* gtk/_gtk.py:
	* gtk/_lazyutils.py:
	* gtk/deprecation.py:
	* gtk/gtk.override:
	* gtk/gtkmodule.c: (init_gtkimpl):
	* gtk/libglade.override:
	* gtk/libglademodule.c: (init_glade):
	* gtk/pygtk.h:
	* tests/common.py:
	* tests/test_api.py:
	Only load types in gtk when they are used, fixes #346946
	
2006-07-13  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* tests/test_container.py: New unit test to
	set/get_child_property, etc. by Lorenzo Gil Sanchez.

	* tests/Makefile.am (tests): Add test_container.py.

	* gtk/gtkcontainer.override
	(_wrap_GtkContainer__proxy_do_set_child_property): Add missing
	param.

	* gtk/gtkwidget.override (_wrap_gtk_widget_set_activate_signal)
	(_wrap_gtk_widget_get_activate_signal): Add getter and setter for
	GtkWidgetClass->activate_signal.  Fixes #331445.

	* gtk/gtk.override (_wrap_gtk_action_set_menu_item_type): Add
	class method to change GtkActionClass->menu_item_type.
	(_wrap_gtk_action_set_tool_item_type): idem for tool_item_type.
	Fixes #331355.

	* gtk/gtk-base.defs: Declare the missing
	GtkAction.create_menu|tool_item virtuals.

	* examples/gtk/scrollable.py (Layout.do_size_allocate): Save the
	allocation (#341509, Muntyan).

	* gtk/gtk.override (_wrap_GtkEditable__do_insert_text): Impl.
	(_wrap_GtkEditable__do_get_selection_bounds): Impl.

	* gtk/gtk-base.defs (insert_text): Add direction information to
	the position parameter of gtk.Editbale.insert_text virtual.

	* codegen/defsparser.py (IncludeParser.include): Fix including
	absolute path names, #345073.

2006-07-12  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* NEWS: I forgot one NEWS item in the release :P

	* configure.in: Post release version bump.

=== 2.9.3 ===
2006-07-12  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* NEWS: Update.

	* tests/Makefile.am: Copy a few more gtk module support files for
	running tests.

	* tests/common.py: Don't hide import errors.

2006-07-13  Johan Dahlin  <johan@gnome.org>

	* gtk/gtk.override: Ignore gtk_recent_chooser_set_show_numbers and
	gtk_recent_chooser_get_show_numbers, 
	see http://article.gmane.org/gmane.comp.gnome.language-bindings/805

2006-07-12  John Finlay  <finlay@moeraki.com>

	* gtk/gtkunixprint.override (_wrap_gtk_enumerate_printers): Add.

2006-07-11  John Finlay  <finlay@moeraki.com>

	* gtk/gtkunixprint.defs (gtk_printer_accepts_pdf)
	(gtk_printer_accepts_ps, gtk_enumerate_printers): Add.

	* gtk/gdk-base.defs (gdk_set_pointer_hooks): Remove dup.

2006-07-10  John Finlay  <finlay@moeraki.com>

	* gtk/gtk-base.defs (gtk_binding_entry_add_signal): Remove dup.

	* gtk/gdk-base-types.defs (GdkColorspace): Remove duplicate.

	* gtk/gdk-base.defs (gdk_color_change): Change to function to resolve
	conflict with gdk_colormap_change.
	(gdk_colormap_change): Note as deprecated.
	(gdk_display_store_clipboard): Remove dup def

2006-07-08  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtk-base.defs (clipboard_get_for_display): Add
	"(caller-owns-return nil)"; Fixes #343960.

2006-07-07  John Finlay  <finlay@moeraki.com>

	* gtk/gdk.override: Ignore-glob *_libgtk_only. Fixes #321476.

2006-07-06  John Finlay  <finlay@moeraki.com>

	* pango.override (_wrap_pango_attr_underline_color_new) 
	(_wrap_pango_attr_strikethrough_color_new) 
	(_wrap_pango_attr_size_new_absolute) 
	(_wrap_pango_attr_letter_spacing_new): Add.

	* pango.defs (AttrSizeAbsolute, AttrUnderlineColor) 
	(AttrStrikethroughColor, AttrLetterSpacing)
	(pango_font_description_set_absolute_size)
	(pango_font_description_get_size_is_absolute)
	(pango_font_get_font_map): Add.

	* gtk/gtk.override (_wrap_gtk_color_selection_palette_to_string):
	Allow colors to be a sequence.

	* atk.override (_wrap_atk_state_set_contains_states) 
	(_wrap_atk_state_set_add_states): Fix reference leaks.

2006-07-06  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* gtk/gtk.override (_wrap_gtk_color_selection_palette_to_string):
	Check that argument is a list of gdk.Color.  Fixes #346745.

2006-07-06  John Finlay  <finlay@moeraki.com>

	* atk.override (atk_text_free_ranges): Ignore.
	(_wrap_atk_value_get_current_value) 
	(_wrap_atk_value_get_maximum_value) 
	(_wrap_atk_value_get_current_value)
	(_wrap_atk_value_set_current_value): Add.

	* atkmodule.c (initatk): Add call to _pyatk_register_boxed_types()

	* Makefile.am (ATK_OVERRIDES): Add atkrectangle.override

	* atkrectangle.override: Add.

	* atk.override (_wrap_atk_text_get_text_at_offset) 
	(_wrap_atk_text_get_text_before_offset) 
	(_wrap_atk_text_get_character_extents) 
	(_wrap_atk_text_get_run_attributes) 
	(_wrap_atk_text_get_default_attributes)
	(_wrap_atk_text_get_bounded_ranges, _wrap_atk_text_get_selection) 
	(_wrap_atk_text_get_range_extents): Add,

	* atk.defs (atk_rectangle_new): Add.

2006-07-05  John Finlay  <finlay@moeraki.com>

	* atk.override (_wrap_atk_state_set_contains_states)
	(_wrap_atk_state_set_add_states):
	(_wrap_atk_table_get_selected_rows) 
	(_wrap_atk_table_get_selected_columns):
	(_wrap_atk_text_get_text_after_offset): Add.

	* atk.defs (atk_relation_type_get_name): Define as function instead
	of method.
	(atk_state_type_get_name):  Define as function instead of method.
	(atk_state_set_new): Fix typo.

	* atk.override (_wrap_atk_relation_get_target): Add.
	(_wrap_atk_relation_new): Raise ValueError if targets is zero length.

2006-07-05  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/Makefile.am:
	* gtk/__init__.py:
	* gtk/_lazyutils.py:
	* tests/Makefile.am:
	* tests/test_api.py:
	Add infrastructure to handle lazy loading.
	Move keysyms to be loaded lazily.
	Add API tests to make sure keysyms works.

2006-07-05  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/Makefile.am:
	* gtk/__init__.py:
	* gtk/deprecation.py:
	Move deprecation related classes to a separate python file

2006-06-27  John Finlay  <finlay@moeraki.com>

	* atk-types.defs: Update defs for atk-1.8
	* atk.defs: Update defs for atk-1.8

	* atk.override (_wrap_atk_component_get_size) 
	(_wrap_atk_component_get_size, _wrap_atk_component_get_extents)
	(_wrap_atk_editable_text_set_run_attributes)
	(_wrap_atk_editable_text_insert_text)
	(_wrap_atk_image_get_image_position) 
	(_wrap_atk_image_get_image_position): Add

2006-06-27  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* gtk/gdk-2.10.defs, gtk/gdk-base.defs: It seems that all X11
	specific functions are available in gtk+ 2.8 too; moving them from
	gdk-2.10.defs to gdk-base.defs.

	* gtk/gdkcairo.override (_wrap_gdk_cairo_rectangle): Missing
	PyErr_Clear() when first protype parsing fails.

2006-06-27  John Finlay  <finlay@moeraki.com>

	* gtk/gtk-2.10.defs (GtkPrintOperationPreview, GtkRecentChooser):
	Add virtual defs for these interfaces.

2006-06-25  John Finlay  <finlay@moeraki.com>

	* gtk/gtk-2.10.defs (gtk_status_icon_set_from_pixbuf): Allow pixbuf
	to be None
	(gtk_status_icon_set_tooltip): Allow tooltip_text to be None
	(print_run_page_setup_dialog): Allow parent to be None.

	* gtk/gtk.override (_wrap_gtk_recent_manager_add_full): is_private
	should be a boolean.

	* gtk/gtk-2.10-types.defs:  Add RecentChooser and
	PrintOperationPreview implements interface notations

2006-06-25  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* codegen/argtypes.py (ArgMatcher.register_enum,
	(ArgMatcher.register_flag): Use IntArg to handle enums and flags
	with no typecode.  This is to avoid the compiler warning
	"dereferencing type-punned pointer will break strict-aliasing
	rules" when converting enums or flags with no typecode.
	(EnumArg.enum): Typecast to gpointer, not gint*, to avoid gcc type
	punning warnings.
	(FlagsArg.flag): idem.

	* codegen/codegen.py (SourceWriter.write_enums): Typecast second
	 argument of PyModule_AddIntConstant to
	 (char*) to avoid const warning on python < 2.5.

2006-06-25  John Finlay  <finlay@moeraki.com>

	* gtk/gtkwidget.override (_wrap_gtk_widget_class_find_style_property):
	Add.

2006-06-24  John Finlay  <finlay@moeraki.com>

	* gtk/gtk.override (_wrap_gtk_print_operation_get_error):
	g_clear_error() is called in pyg_error_check()

	* gtk/gtk-2.10.defs (gtk_print_settings_set): Allow value to be NULL.

2006-06-24  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtk.override (_wrap_gtk_print_operation_get_error):
	s/g_error_clear/g_clear_error/.
	(_wrap_gtk_print_operation_get_error): Return the exception value,
	not just error->message, so that the programmer can consult
	error.domain and error.code in addition to error.message.

2006-06-24  John Finlay  <finlay@moeraki.com>

	* gtk/gtk.override (_wrap_gtk_print_operation_get_error): Return
	the error message if any.

2006-06-22  John Finlay  <finlay@moeraki.com>

	* gtk/gtk-2.10-types.defs (PrintOperationPreview): Identify as an
	interface.

	* gtk/gtk-2.10.defs (gtk_label_get_line_wrap_mode)
	(gtk_label_set_line_wrap_mode): Add

	* gtk/gtk.override (_wrap_gtk_notebook_set_window_creation_hook):
	Fix parse tuple format.

2006-06-22  Frederic Peters  <fpeters@0d.be>

	* gtk/gtkunixprint.override (_wrap_gtk_print_job_send): update to
	latest GTK+ API change.  #345623

2006-06-20  Elijah Newren  <newren gmail com>

	* gtk/gtk-2.10.defs (get_print_to_file, set_print_to_file): remove
	these functions as the corresponding functions in gtk+ have
	recently been removed as well.  #345447

2006-06-15  John Finlay  <finlay@moeraki.com>

	* gtk/gtk.override (_wrap_gtk_notebook_set_window_creation_hook): Add.

	* gtk/gdk.override (_wrap_gdk_screen_set_font_options) 
	(_wrap_gdk_screen_set_font_options): Add.

	* gtk/gtk-base.defs (accel_group_from_accel_closure): Remove duplicate.

	* gtk/gdk.override (gdk_atom_intern_static_string): Ignore

2006-06-15  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* configure.in: Post-release version bump.

=== 2.9.2 ===
2006-06-15  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* examples/pygtk-demo/demos/print_editor.py: Update example to
	API changes a couple of weeks ago.

	* NEWS: Update.

	* gtk/gtk-2.10.defs (target_list_add_rich_text_targets): Remove
	"(of-object "GtkTargetList")", which is not valid for functions.

	* gtk/gtkunixprint.override (pygtk_print_job_complete_func_cb):
	PycairoSurface_FromSurface API breakage happened since pycairo
	1.1.6, not 1.1.7.  Fixes #344957.

2006-06-14  John Finlay  <finlay@moeraki.com>

	* gtk/gtktextview.override (_wrap_gtk_text_buffer_serialize) 
	(_wrap_gtk_text_buffer_register_deserialize_format) 
	(_wrap_gtk_text_buffer_register_serialize_format) 
	(_wrap_gtk_text_buffer_get_serialize_formats) 
	(_wrap_gtk_text_buffer_get_serialize_formats): Add.

	* codegen/argtypes.py (arg): Match const-guint8* as UCharArg

	* gtk/gtktextview.override (_wrap_gtk_text_buffer_deserialize) 
	(_wrap_gtk_text_buffer_deserialize): Add.

2006-06-14  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* codegen/defsparser.py (IncludeParser.include): Fix a small typo
	that caused bug #344845.

2006-06-14  John Finlay  <finlay@moeraki.com>

	* gtk/gtktextview.override
	(_wrap_gtk_text_buffer_get_copy_target_list) : Add,

	* gtk/gtk.override (_wrap_gtk_drag_dest_find_target) 
	(_wrap_gtk_drag_dest_get_target_list) 
	(_wrap_gtk_drag_dest_set_target_list, _wrap_gtk_drag_begin) 
	(_wrap_gtk_drag_source_get_target_list) 
	(_wrap_gtk_drag_source_set_target_list) 
	(_wrap_gtk_target_list_add_text_targets) 
	(_wrap_gtk_target_list_add_image_targets) 
	(_wrap_gtk_target_list_add_uri_targets) 
	(_wrap_gtk_target_list_add_rich_text_targets):
	Use pygtk_target_list_from_sequence and pygtk_target_list_to_list.

	* gtk/gtkobject-support.c (pygtk_target_list_from_sequence) 
	(pygtk_target_list_to_list): Add.

2006-06-13  John Finlay  <finlay@moeraki.com>

	* gtk/gtk-2.10.defs (gtk_tree_view_set_search_entry): Allow entry arg
	to default to None.

	* gtk/gtktreeview.override
	(_wrap_gtk_tree_view_set_search_position_func): Add.

	* gtk/gtk-2.10.defs (gtk_target_list_add_rich_text_targets): Change
	to function.

	* gtk/gtk.override (_wrap_gtk_target_list_add_rich_text_targets): Add.

2006-06-14  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* configure.in: Post-release version bump.

=== 2.9.1 ===
2006-06-14  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* codegen/defsparser.py (IncludeParser.include),
	* codegen/codegen.py (main): Add a -I option to specify a path to
	search for .defs files.

	* gtk/Makefile.am (CREATEDEFS): Use $(top_srcdir) to find
	createdefs.py.
	(gtk.c): gtk.c depends also on gdk-types.defs.
	(EXTRA_DIST): Add gtk-extrafuncs.defs.

	* codegen/Makefile.am (EXTRA_DIST): Add createdefs.py.

2006-06-13  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtkmodule.c (pygtk_add_extra_constants): Don't add
	GTK_PAPER_* constants with gtk+ 2.8.

	* gtk/gtkunixprint.override (pygtk_print_job_complete_func_cb):
	Make it conditionally compile with both pycairo >= 1.1.7 and
	earlier versions.

	* configure.in: Explicitly require pycairo for module pangocairo.
	Minimum pycairo version changed back to 1.0.2.

	* NEWS: Updated.

	* gtk/gdkcairo.override (_wrap_gdk_cairo_rectangle): Make
	gdk.CairoContext.rectangle() also accept (x, y, width, height)
	parameters to avoid violating the Liskov substitution principle,
	since it redefines cairo.Context.rectangle() with a different
	signature.

2006-06-13  John Finlay  <finlay@moeraki.com>

	* gtk/gtk.override (_wrap_gtk_menu_popup): Improve anti-leak code.
	(_wrap_gtk_init_check, _wrap_gtk_init_check): Ignore.

	* gtk/pygtk-private.h: Add. pygdk_atom_vector_from_sequence

	* gtk/gtkobject-support.c (pygdk_atom_vector_from_sequence): Add.

	* gtk/gtk.override (_wrap_gtk_targets_include_rich_text) 
	(_wrap_gtk_targets_include_uri, _wrap_gtk_targets_include_text) 
	(_wrap_gtk_targets_include_image): Add.

2006-06-12  John Finlay  <finlay@moeraki.com>

	* gtk/gtkstyle.override (_wrap_gtk_style_lookup_color): Add.

	* gtk/gtk-2.10-types.defs (enum TreeViewGridLines): Add.

	* gtk/gtk-2.10.defs (gtk_tree_view_set_enable_tree_lines) 
	(gtk_tree_view_get_enable_tree_lines, gtk_tree_view_set_grid_lines)
	(gtk_tree_view_get_grid_lines, gtk_tree_view_grid_lines_get_type) 
	(gtk_print_operation_action_get_type): Add.

	* gtk/gtk.override (_wrap_gtk_status_icon_position_menu)
	(_wrap_gtk_status_icon_position_menu): Add.
	(_wrap_gtk_menu_popup): Recode to support passing
	gtk.status_icon_position_menu as a position function while maintaining
	backward compatibility.

2006-06-11  John Finlay  <finlay@moeraki.com>

	* gtk/gtk.override (_wrap_gtk_recent_manager_get_items) 
	(_wrap_gtk_recent_manager_add_full): Add.

	* gtk/gtktreeview.override (gtk_tree_store_insert_with_values)
	(gtk_tree_store_insert_with_valuesv): Ignore

	* gtk/gtk.override (_wrap_gtk_size_group_get_widgets): Fix bug.
	(_wrap_gtk_recent_filter_add_custom) 
	(_wrap_gtk_recent_filter_filter): Add.

	* gtk/gtk-2.10.defs (register_serialize_tagset) 
	(register_deserialize_tagset): Allow NULL tagset_name arg.

	* gtk/gtk.override (_wrap_gtk_recent_chooser_dialog_new): Note as
	new-constructor.
	(_wrap_gtk_size_group_get_widgets): Add.

2006-06-10  John Finlay  <finlay@moeraki.com>

	* gtk/gtk-2.10.defs (gtk_recent_chooser_menu_new_for_manager) 
	(recent_chooser_widget_new_for_manager): Use new object constructor.

2006-06-11  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* configure.in: Check for the X11 GDK target.

	* gtk/gdk.override: Don't ignore gdk_x11_* any more.

	* gtk/gdk-2.10.defs: Add x11 specific functions, scanned from
	gdkx.h, corrected (function->method), and made conditionally
	compile only on the X11 GDK target.

	* gtk/gdk-base.defs: Removed x11 specific functions added by johan
	after 2.8 (re-added in gdk-2.10.defs).

2006-06-10  John Finlay  <finlay@moeraki.com>

	* gtk/gtk-2.10.defs (gtk_recent_chooser_menu_new_for_manager)
	(recent_chooser_widget_new_for_manager): : Set
	as constructor and allow manager param to default to None.

	* gtk/gtk.override (_wrap_gtk_recent_chooser_dialog_new) 
	(_wrap_gtk_recent_info_get_application_info) 
	(_wrap_gtk_recent_info_get_groups) 
	(_wrap_gtk_recent_info_get_applications) 
	(_wrap_gtk_recent_chooser_set_sort_func) 
	(_wrap_gtk_recent_chooser_list_filters): Add.
	(gtk_print_error_quark, gtk_recent_chooser_error_quark)
	(gtk_recent_chooser_dialog_new_for_manager)
	(gtk_recent_chooser_menu_new)
	(gtk_recent_chooser_widget_new, gtk_recent_manager_error_quark): Ignore

2006-06-09  John Finlay  <finlay@moeraki.com>

	* gtk/gtk.override (_wrap_gtk_recent_chooser_get_items) 
	(_wrap_gtk_recent_chooser_get_uris): Add.

	* gtk/gtkiconview.override (_wrap_gtk_icon_view_selected_foreach):
	Fix leaks.

	* gtk/gtktextview.override (_wrap_gtk_text_tag_table_foreach):
	Fix leaks.

	* gtk/gtk.override (_wrap_gtk_print_settings_foreach)
	(_wrap_gtk_print_settings_set_page_ranges)
	(_wrap_gtk_print_settings_get_page_ranges): Add.

	* gtk/gtk-2.10.defs (gtk_button_set_image_position)
	(gtk_button_get_image_position, gtk_print_context_set_cairo_context)
	(gtk_print_operation_set_track_print_status)
	(gtk_print_operation_set_show_progress)
	(gtk_print_operation_set_allow_async)
	(gtk_print_operation_set_custom_tab_label)
	(gtk_print_operation_get_error, gtk_print_operation_cancel
	(gtk_status_icon_get_geometry): Add.
	(gtk_print_operation_set_default_page_setup)
	(gtk_print_operation_set_print_settings): Allow default NULL arg.

	* gtk/gtk-2.10-types.defs: Add PrintOperationPreview, RecentFilter,
	RecentInfo. Sync enums.

2006-06-08  Frederic Peters  <fpeters@0d.be>

	* configure.in, gtk/gtkunixprint.override: Updated pycairo dependencies
	from 0.5.0 to 1.1.7 since PycairoSurface_FromSurface signature changed.

	* gtk/gtk-2.10-types.defs, gtk/gtk-2.10.defs: Updated to new GTK+
	Printing API changes.

2006-06-06  John Finlay  <finlay@moeraki.com>

	* gtk/gtkunixprintmodule.c (initunixprint):
	Add pygtkunixprint_add_constants() call.

	* gtk/gtkunixprint.defs: 
	* gtk/gtkunixprint.override: Add files for unixprint module.

	* gtk/Makefile.am: Add support for gtk.unixprint module.

	* configure.in: Add support for gtk.unixprint module.

2006-06-06  Johan Dahlin  <johan@gnome.org>

	* gtk/gtk-base.defs (set_mnemonic_widget): Allow widget to be null

2006-06-05  John Finlay  <finlay@moeraki.com>

	* gtk/gtk-2.10.defs (paper_size_new): Allow name to default to None.

	* gtk/gtkmodule.c (pygtk_add_extra_constants): Add GTK_PAPER_NAME
	constants.

2006-06-04  John Finlay  <finlay@moeraki.com>

	* gtk/gtk.override (gtk_paper_size_free): Ignore

	* gtk/gtk-2.10.defs (gtk_message_dialog_set_image): Add.

	* gtk/gtk.override (_wrap_gtk_link_button_set_uri_hook): Add.

	* gtk/gtk-2.10.defs (input_shape_combine_mask): Allow shape_mask
	to be None.
	(gtk_link_button_new_with_label): Set as constructor for GtkLinkButton.
	Allow label param to default to None.

2006-06-04  Johan Dahlin  <johan@gnome.org>

	* pango.override (_wrap_pango_tab_array_get_tabs): Fix two
	leaks found by coverity.

2006-06-04  John Finlay  <finlay@moeraki.com>

	* gtk/gtk-2.10.defs (drag_dest_set_track_motion) 
	(drag_dest_get_track_motion): Change to methods of GtkWidget.

	* gtk/gtk.override (_wrap_gtk_clipboard_wait_for_rich_text) 
	(_wrap_gtk_clipboard_request_rich_text): Add.

	* codegen/argtypes.py (AtomArg.write_return): Fix leak in GdkAtom
	return.

2006-06-03  John Finlay  <finlay@moeraki.com>

	* gtk/gtk-2.10.defs (gtk_assistant_set_page_header_image)
	(gtk_assistant_set_page_side_image): Allow
	pixbuf param to be None and optional.
	(gtk_entry_set_inner_border): Allow border param to be None.

2006-06-01  John Finlay  <finlay@moeraki.com>

	* gtk/gtk.override (_wrap_gtk_assistant_set_forward_page_func): Add.

	* gtk/gdkevent.override (_wrap_gdk_event_tp_getattr): Output
	"selection" as a gdk.OWNER_CHANGE member.

2006-06-01  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* gtk/gtk-2.10.defs: gtk_print_context_create_context renamed to
	gtk_print_context_create_pango_context;
	gtk_print_context_create_layout renamed to
	gtk_print_context_create_pango_layout;
	gtk_print_context_get_fontmap renamed to
	gtk_print_context_get_pango_fontmap; gtk_print_context_get_cairo
	renamed to gtk_print_context_get_cairo_context.

	* gtk/gtk.override
	(_wrap_GtkCellLayout__proxy_do_set_cell_data_func):
	s/Py_DECREF(py_ret)/Py_XDECREF(py_ret)/, thanks Paolo Borelli.

2006-05-31  John Finlay  <finlay@moeraki.com>

	* gtk/gdkdraw.override (_wrap_gdk_draw_layout_line): Add,

	* gtk/gdkcairo.override (_wrap_gdk_cairo_set_source_pixmap)
	(_wrap_gdk_cairo_region, _wrap_gdk_cairo_rectangle): Add as methods.

	* gtk/gdk-base.defs (shape_combine_region): shape_region may be None.

	* gtk/gdk.override (gdk_region_destroy): Ignore.

2006-05-26  John Finlay  <finlay@moeraki.com>

	* gtk/gtk-base.defs (set_cursor): Allow IconView.set_cursor method
	params 'cell' and 'start_editing' to be optional.
	Fixes #343039 (Ross Burton)

2006-05-20  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtk.override (_wrap_GtkCellRenderer__do_get_size): Impl.
	Fixes #339431.

2006-05-20  John Finlay  <finlay@moeraki.com>

	* pangocairo.override (_wrap_context_set_font_options): Allow
	font_options param to be None.

2006-05-20  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* examples/pygtk-demo/demos/print_editor.py (begin_print):
	s/set_nr_of_pages/set_n_pages/ (gtk api change).

2006-05-18  John Finlay  <finlay@moeraki.com>

	* gtk/gtk.override (clipboard_request_contents_cb) 
	(clipboard_clear_func, clipboard_get_func) 
	(clipboard_request_targets_cb, clipboard_request_image_cb): Fix
	reference leaks (#342114).

2006-05-17  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* gtk/gtk.override (clipboard_request_text_cb): Fix reference
	leaks (#342114).

2006-05-14  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtkcontainer.override
	(_wrap_GtkContainer__proxy_do_set_child_property)
	(_wrap_GtkContainer__proxy_do_get_child_property)
	(_wrap_GtkContainer__do_set_child_property)
	(_wrap_GtkContainer__do_get_child_property): Impl.  Fixes #341641.

	* gtk/gtk.override (_wrap_GtkCellRenderer__proxy_do_get_size): Fix
	reference leak on 'self' and 'py_ret'.
	(_wrap_gtk_dialog_set_alternative_button_order): idem.

	* codegen/reversewrapper.py: Fix registration of StringReturn type
	handler; fixes #341634.

2006-05-14  Murray Cumming  <murrayc@murrayc.com>

	* gtk/gtk-2.10.defs: Updated to fix the build, because 
	- gtk_print_operation_set_nr_of_pages() changed to gtk_print_operation_set_n_pages()
	- gtk_print_settings_get_num_copies() changed to gtk_print_settings_get_n_copies()
	- gtk_print_settings_set_num_copies() changed to gtk_print_settings_set_n_copies()
	- gtk_recent_manager_add_full() no longer has a GError* parameter.

2006-05-10  Johan Dahlin  <johan@gnome.org>

	* codegen/codegen.py: Refactor a big chunk into a class with methods.

	* Makefile.am:
	* gtk/Makefile.am: Use PYCAIRO_CFLAGS

	* configure.in: Make pycairo a required dependency, make sure
	the optional Gtk+ 2.10 dependency check work and only build
	pangocairo if pycairo found and libglade if gtk can be built

2006-05-08  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* examples/pygtk-demo/demos/print_editor.py,
	* examples/Makefile.am: Add Print Editor demo, originally found in
	gtk+ sources and translated to Python.

	* gtk/gtk-2.10.defs: gtk.print_run_page_setup_dialog second
	argument can be None/NULL.

2006-05-07  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtk.override (_wrap_add_log_handlers)
	(_wrap_remove_log_handlers): Try to use
	pyg_add_warning_redirection and pyg_disable_warning_redirections
	if available.

	* pangomodule.c (initpango): idem.

	* examples/gtk/testprint.py: Add a python print demonstration,
	based on testprint.c in gtk+ sources.  It is missing a print
	dialog, though...

	* examples/Makefile.am (EXTRA_DIST): add gtk/testprint.py.

	* gtk/gtk.override: Include pycairo.
	(_wrap_gtk_print_context_get_cairo): Override to make
	gtk.PrintContext return a gtk.gdk.CairoContext object instead of a
	cairo.Context one.

	* configure.in: pycairo dependency no longer optional.

	* gtk/gtk-2.10-types.defs (PrintContext): Missing gtk.PrintContext.

	* gtk/gtk-2.10.defs: Make 'parent' parameter of
	gtk_print_operation_run optional and None acceptable.

	* gtk/gtk-2.10-types.defs: Declare type gtk.PageSetup.
	(PrintSettings): idem for gtk.PrintSettings.
	(PaperSize): Add boxed gtk.PaperSize.

	* gtk/gdk.override (_wrap_gdk_bitmap_create_from_data) 
	(_wrap_gdk_pixmap_create_from_data): Override to fix a compilation
	warning and add bounds check on the data parameter.

	* gtk/gdkcairo.override: Add explicit braces to keep gcc happy.

	* gtk/Makefile.am: Make sure the defs are regenerated when
	configure runs, due to possible changes in gtk+ 2.10 detection.
	(gtk.c): Make gtk.c depend on gdk-types.defs to force it to be
	generated early.
	(.defs.c): Remove the recursive make invocation, no longer needed.

	* gtk/Makefile.am (defs_DATA): Install gdk.defs, gtk.defs,
	gdk-types.defs, and gtk-types.defs.  Thanks Olav Vitters
	Fixes bug #340920.

2006-05-06  Johan Dahlin  <jdahlin@async.com.br>

	* codegen/createdefs.py:
	* configure.in:
	* gtk/Makefile.am:
	* gtk/gdk-2.10.defs:
	* gtk/gdk-base-types.defs:
	* gtk/gdk-base.defs:
	* gtk/gdk-types.defs:
	* gtk/gdk.defs:
	* gtk/gdk.override:
	* gtk/gtk-2.10-types.defs:
	* gtk/gtk-2.10.defs:
	* gtk/gtk-base-types.defs:
	* gtk/gtk-base.defs:
	* gtk/gtk-types.defs:
	* gtk/gtk.defs:

	Add conditional support for Gtk+ 2.10 add new api.

2006-05-06  Johan Dahlin  <jdahlin@async.com.br>

	* codegen/h2def.py (main): Add support for filtering out definies
	in existing files

	* gtk/gtk.override: Ignore a bunch of stuff

	* gtk/gtk.defs: Add deprecated, broken and unsupported API here,
	to make it easier to merge in the future

	* codegen/override.py (Overrides.__parse_override): 
	* codegen/codegen.py (main): 
	Add ignore-type statement in override

	* codegen/h2def.py: Refactor to use OOP, remove duplicated code

2006-05-01  John Ehresman <jpe@wingware.com>

	* gtk/gdk-types.defs:
	* gtk/gdk.defs:
	* gtk/gdk.override
	* gtk/gtk.defs:
	* gtk/pygtk-private.h:
	GdkRegion wrapper

2006-05-01  John Ehresman <jpe@wingware.com>

	* gtk/gtktreeview.override: Restore override for
	TreeView.get_visible_rect

2006-05-01  Yevgen Muntyan  <muntyan@tamu.edu>

	* codegen/reversewrapper.py (ReverseWrapper.generate): Missing ()
	in Py_BuildValue template string to force a tuple to be created
	even when number of retvals is one.  Reviewed by Gustavo.  Fixes
	Bug 340162 "Missing ()".

2006-04-26  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gdk.override (_wrap_gdk_event_handler_set): 
	* gtk/gdk.defs (event_handler_set): 
	Wrap gdk_event_handler_set

	* gtk/Makefile.am:
	* gtk/gdk.override:
	* gtk/gdkcairo.override:
	* gtk/gdkcolor.override:
	* gtk/gdkdraw.override:
	* gtk/gdkevent.override:
	* gtk/gdkgc.override:
	* gtk/gdkpixbuf.override:
	* gtk/gdkrectangle.override:
	* gtk/gdkwindow.override:
	* gtk/gtktoolbar.override:
	Split out a few more files

2006-04-23  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* codegen/codegen.py:
	* codegen/definitions.py:  Add support for (unblock-threads #t) in
	functions and methods, which enables the generation of
	pyg_(begin|end)_allow_threads around the C call.

	* codegen/argtypes.py (ObjectArg.write_return): Follow up on
	#169204 to add support for const-Object as return type.  This
	fixes a build problem in pygda.

2006-04-18  John Ehresman   <jpe@wingware.com>

	* setup.py: Remove support for building / installing gobject, pygtk.py,
	and dsextras.py

2006-04-16  Richard Hult  <richard@imendio.com>

	* gtk/gtkmodule.c: 
	* gtk/gtk.override: Move locale.h include from gtkmodule.c here to
	fix the build.

2006-04-13  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gtkcontainer.override (pygtk_container_for_common): 
	Set an exception and jump out (Coverity)
	
	* gtk/gtk.override (_wrap_gtk_stock_list_ids): Decref py_item
	after using it (Coverity)

2006-04-06  Johan Dahlin  <johan@gnome.org>

	* gtk/__init__.py (_init): Add log handlers here
	(threads_init): Deprecated gtk.threads_*, gtk.gdk.threads_* should
	be used instead, fixes #165927 (Steve Chaplin)

	* gtk/gtk.override (_wrap_remove_log_handlers): New function,
	makes it possible to remove the handlers pygtk installs.
	Fixes #323786

	* gtk/gtkmodule.c (init_gtk): Refactor, move init_check...
	(init_gtk): Move the log handlers to gtk.override

	* gtk/gtk.override (_wrap_gtk_init_check): ..to here

	* gtk/__init__.py: Refactor, call init_check() and print warning
	if DISPLAY is not set. Fixes #316877

2006-04-05  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gtktreeview.override
	(_wrap_gtk_tree_sortable_set_default_sort_func): Allow callback 
	to be set to None, found by Patrick O'Brien

	* tests/test_liststore.py (ListStoreTest.testSetDefaultSortFunc): 
	Add test

2006-04-04  Johan Dahlin  <jdahlin@async.com.br>

	* configure.in: Post release version bump

=== 2.9.0 ===
2006-04-04  Johan Dahlin  <jdahlin@async.com.br>

	* NEWS: Update

2006-04-04  John Ehresman  <jpe@wingware.com>

    reviewed by: Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gtktreeview.override:
	Make sure gtk.TreeView.cell_get_size() allows
	the usage of the in argument. Fixes #326357

2006-04-03  Johan Dahlin  <jdahlin@async.com.br>

	* codegen/codegen.py:
	Fit in 80 characters, do not use \

	* codegen/argtypes.py:
	* codegen/codegen.py:
	* codegen/definitions.py:
	* codegen/defsconvert.py:
	* codegen/defsparser.py:
	* codegen/docextract.py:
	* codegen/docextract_to_xml.py:
	* codegen/docgen.py:
	* codegen/h2def.py:
	* codegen/mkskel.py:
	* codegen/override.py:
	* codegen/reversewrapper.py:
	* examples/glade/autoconnect.py:
	* examples/gobject/editable-interface.py:
	* examples/gobject/signal.py:
	* examples/gtk/bin.py:
	* examples/gtk/filechooser.py:
	* examples/gtk/scrollable.py:
	* examples/gtk/sizegroup.py:
	* examples/gtk/uimanager.py:
	* examples/ide/edit.py:
	* examples/ide/gtkdb.py:
	* examples/ide/gtkprof.py:
	* examples/pango/pangocairo-simple.py:
	* examples/pango/utf8-demo.py:
	* examples/pygtk-demo/demos/changedisplay.py:
	* examples/pygtk-demo/demos/dnd.py:
	* examples/pygtk-demo/demos/dndpixmap.py:
	* examples/pygtk-demo/demos/entry_completion.py:
	* examples/pygtk-demo/demos/expander.py:
	* examples/pygtk-demo/demos/hypertext.py:
	* examples/pygtk-demo/demos/list_store.py:
	* examples/pygtk-demo/demos/textview.py:
	* examples/pygtk-demo/demos/tree_store.py:
	* examples/pygtk-demo/demos/treemodel.py:
	* examples/simple/dnd.py:
	* examples/simple/dndpixmap.py:
	* examples/simple/hello.py:
	* examples/simple/scribble.py:
	* examples/simple/simple.py:
	* examples/simple/tooltip.py:
	* gtk/__init__.py:
	* gtk/compat.py:
	* gtk/keysyms.py:
	* ltihooks.py:
	* setup.py:
	* tests/common.py:
	* tests/runtests.py:
	* tests/test_actiongroup.py:
	* tests/test_conversion.py:
	* tests/test_dialog.py:
	* tests/test_enum.py:
	* tests/test_gdkevent.py:
	* tests/test_liststore.py:
	* tests/test_radiobutton.py:
	* tests/test_style.py:
	* tests/testmodule.py:

	Run reindent.py on all python code.

2006-04-02  Johan Dahlin  <johan@gnome.org>

	* gtk/gdk.defs (rotate_simple): Add gdk.Pixbuf.rotate_simple,
	fixes #314164 (Karel Vervaeke)

	* examples/pygtk-demo/demos/treemodel.py:
	Check for null, so it can be used with a model filter,
	fixes #311459 (Stephen Kennedy)

	* examples/gtk/widget.py: Remove tabs fixes #325320
	(Dieter Verfaillie)

2006-04-02  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtk-types.c (PyGdkWindow_PropertyGet): Change property size
	limit from 9999 to G_MAXLONG.  Thanks Wander Boessenkool.
	Fixes #327778.

	* pango.override (_wrap_pango_layout_line_index_to_x): First
	keyword name should be index, not x_pos, as pointed out by John
	Finlay.  Fixes #316581.

	* gtk/gtk.defs: Mark gtk_tree_row_reference_free as deprecated.
	Fixes #309811.

	* gtk/gtkcontainer.override
	(_wrap_gtk_container_class_list_child_properties): Deprecate in
	favour of gtk.Container.list_child_properties.
	(_wrap_gtk_container_list_child_properties): Add
	gtk.Container.list_child_properties as classmethod.
	(_wrap_gtk_container_class_install_child_property): Deprecate in
	favour of gtk.Container.install_child_property.
	(_wrap_gtk_container_install_child_property): Add
	gtk.Container.install_child_property as clasmethod.  Fixes #308394.

	* gtk/gtktreeview.override: Remove gtk_tree_view_get_visible_rect
	duplicate override.

	* gtk/gtk.override: Make the "new-constructor
	GTK_TYPE_MESSAGE_DIALOG" declaration conditional on gtk+ >= 2.9,
	to match the contents of the constructor.

2006-04-02  Johan Dahlin  <johan@gnome.org>

	* gtk/gdk.override (_wrap_gdk_draw_indexed_image):
	wrap, Fixes #333431 (Hamish Moffatt)
	* tests/test_gdk.py (GdkTest.testDrawIndexedImage): Add test

	* gtk/gtk.defs (spin): Set default value of increment to
	1, fixes #325452 (Sebastian Rittau)

	* pango.override:
	* tests/Makefile.am:
	* tests/test_pango.py:

	Set default markup accel marker to \x00, add tests,
	Fixes #329658 (Johan Svedberg)

2006-04-02  Ben Caradoc-Davies  <ben@wintersun.org>

	reviewed by: Johan

	* examples/pygtk-demo/demos/pixbufs.py: Remove
	discontinuous motion, fixes #327931

2006-04-02  Johan Dahlin  <johan@gnome.org>


	* gtk/gtkmodule.c (init_gtk): GDK_PARENT_RELATIVE constant

	* gtk/gtk-types.c (pygtk_style_helper_setitem): Add support for
	GDK_PARENT_RELATIVE in style pixmaps.

	Fixes #320248 (Nikos Kouremenos)

2006-04-01  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* codegen/override.py (Overrides.__parse_override): Check and
	abort if a function is being overridden more than once.

2006-04-01  Rauli Ruohonen  <raulir@iki.fi>

	* codegen/codegen.py (Wrapper.write_functions): Add missing 'data'
	parameter when calling self.write_function.

	* pangocairo.override: Wrap pango_cairo_context_set_font_options
	and pango_cairo_context_get_font_options.  Fixes #328108.

	Reviewed by Gustavo Carneiro.

2006-04-01  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* codegen/codegen.py (Wrapper.write_virtuals): Use
	PyObject_GetAttrString, not PyDict_GetItemString, fixes #327715.

	* gtk/pygtk.h, gtk/gtkmodule.c: Export pygtk_tree_path_to_pyobject
	and pygtk_tree_path_from_pyobject as public APIs.  Fixes #318021.

	* codegen/argtypes.py: Add suppport for const object args.
	Patch by wollny@cbs.mpg.de, plus some additional changes for code
	style improvements and a bug fix.  Fixes #169204.

	* gtk/gtkmodule.c (_pygtk_log_func): Call g_log_default_handler
	when python isn't initialized.  Fixes #334188.

	* examples/Makefile.am (EXTRA_DIST): Ship new editable interface example.

	* examples/gobject/editable-interface.py: Add small example of
	overriding GtkEditable interface method and chaining to parent.

	* codegen/codegen.py: Bug 334986: "Make it possible to
	re-implement interfaces and chain to parent impl."

2006-04-01  Johan Dahlin  <johan@gnome.org>

	* codegen/h2def.py (proto_pat): Allow whitespace before
	last parenthesis. Fixes #317124

2006-04-01  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtk.defs (GtkSpinButton.input, GtkEditable.do_insert_text) 
	(GtkEditable.get_selection_bounds,
	GtkMenuItem.toggle_size_request): Add (direction ...) specifiers
	to these virtuals.  Probably more of these are missing, though.

	* codegen/codegen.py,
	* codegen/definitions.py,
	* codegen/reversewrapper.py:
	Add support for int* and double* (and basic infrastructure to
	support other types in the future) parameters for "reverse
	wrappers".  To use this feature one needs to help the
	codegenerator by adding (direction "out") or (direction "inout") to
	the parameter definitions as appropriate.  Fixes #335964.

2006-04-01  John Finlay  <finlay@moerari.com>

	reviewed by: Johan

	* gtk/gdk.defs:
	* gtk/gtk.defs:
	* gtk/gtk.override:
	* gtk/gtktextview.override:
	* gtk/gtktreeview.override:
	* gtk/gtkwidget.override:
	Add missing bindings, fixes #316881

2006-04-01  Johan Dahlin  <johan@gnome.org>

	* gtk/gdk.defs: Remove display_open_default_libgtk_only,
	it should not be wrapped.
	Fixes #321476

2006-04-01  Marco Cabizza  <marco87@gmail.com>

	reviewed by: Johan

	* gtk/gdk.defs:
	add gdk_screen_get_rgba_colormap and gdk_screen_get_rgba_visual,
	Fixes 328996

2006-04-01  Johan Dahlin  <johan@gnome.org>

	* gtk/gtkmodule.c: (init_gtk):
	* pangomodule.c: (initpango):
	Set default encoding to utf-8 in pango instead of gtk.
	Fixes #328031

2006-04-01  Johan Dahlin  <johan@gnome.org>

	* Makefile.am:
	* configure.in:
	* dsextras.py:
	* gobject/Makefile.am:
	* gobject/gobjectmodule.c:
	* gobject/pygboxed.c:
	* gobject/pygenum.c:
	* gobject/pygflags.c:
	* gobject/pygiochannel.c:
	* gobject/pygmaincontext.c:
	* gobject/pygmainloop.c:
	* gobject/pygobject.c:
	* gobject/pygparamspec.c:
	* gobject/pygpointer.c:
	* gobject/pygsource.c:
	* gobject/pygtype.c:
	* gtk/Makefile.am:
	* pygtk.py:
	* tests/Makefile.am:
	Remove gobject and depend on pygobject 2.10.0

2006-04-01  Johan Dahlin  <jdahlin@async.com.br>

	* codegen/codegen.py: Mark function, methods and getsets as const.

2006-04-01  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtk.override (_wrap_gtk_message_dialog_new): Add missing
	"new-constructor GTK_TYPE_MESSAGE_DIALOG" codegen declaration.

	* codegen/codegen.py: Add support for docstrings in .defs.  To use
	it, add (docstring "foo bar") to class, function or method
	definitions.  Fixes bug #322843.

	* pangocairomodule.c (initpangocairo): Fix compiler warning.

	* m4/python.m4: Fix "underquoted definition of AM_CHECK_PYMOD" warning.

	* gtk/gtk.override (_wrap_gtk_message_dialog_new): On gtk+ 2.9,
	fix constructor to allow subclassing.  Fixes bug #312056.

2006-03-30  Johan Dahlin  <jdahlin@async.com.br>

	* configure.in: Post release version bump

=== PyGTK 2.8.5 ===
2006-03-30  Johan Dahlin  <jdahlin@async.com.br>

	* NEWS: Update.

2006-02-27  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* tests/test_dialog.py (MessageDialogTest.testDialogLeak): Add
	test for bug #332771.

	* tests/test_actiongroup.py (ActionGroupTest.timeout_cb): Use
	self.assertEqual instead of plain assert.

	* gtk/gtk.override (gtk_dialog_new_with_buttons): Remove one too
	many g_object_ref.  Fixes Bug 332771: "gtk.Dialog leak".

2006-02-20  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* gtk/gdkcairo.override: Don't raise an exception if pangocairo
	import fails, since in this case python itself had already raised
	another exception with more information.

2006-02-14  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gtkclist.override (_wrap_gtk_clist_new_with_titles): Fix typos,
	found by Padraig Brady

2006-02-06  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/__init__.py (_is_pydoc): Do not print the deprecation warning
	if we're running under pydoc.

2006-01-26  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* examples/pygtk-demo/demos/pixbufs.py (PixbufsDemo.expose_cb):
	Remove the "FIXME: draw_rgb_image_dithalign seems not to be
	available" comment.

	* gtk/gdk.override (_wrap_gdk_draw_rgb_image): Add comment
	explaining why we always call gdk_draw_rgb_image_dithalign instead
	of gdk_draw_rgb_image.
	(_wrap_gdk_draw_gray_image): idem.

2006-01-21  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtk.defs (cell_view_new_with_text): Add
	caller-owns-return to fix a reference leak.
	(cell_view_new_with_markup): idem.
	(cell_view_new_with_pixbuf): idem.
	(combo_box_new_text): idem.
	(combo_box_entry_new_with_model): idem.
	(combo_box_entry_new_text): idem.
	(expander_new_with_mnemonic): idem.
	(file_chooser_button_new_with_backend): idem.
	(file_chooser_button_new_with_dialog): idem.
	(file_chooser_widget_new_with_backend): idem.
	(gtk_font_button_new_with_font): idem.
	(icon_set_new): idem.
	(gtk_icon_view_new_with_model): idem.
	(gtk_menu_tool_button_new_from_stock): idem.
	(toggle_tool_button_new_from_stock): idem.
	(tool_button_new_from_stock): idem.

	* gtk/gdk.defs (pixbuf_loader_new_with_mime_type): Add
	caller-owns-return to fix a reference leak.

2006-01-20  John Ehresman <jpe@wingware.com>

	* gtk/gdk.override (_wrap_gdk_window_new): Bump ref count
	on x11 so destroy() works as expected

	* tests/test_gdk.py: test for the above

2006-01-19  Johan Dahlin  <jdahlin@async.com.br>

	* examples/Makefile.am:
	Install examples
	
	* examples/gtk/widget.py:
	Call unrealize too
	
	* examples/gtk/scrollable.py: 
	Add example of a scrollable widget

2006-01-15  Christopher Aillon  <caillon@redhat.com>

	* gobject/gobjectmodule.c (pyg_strv_to_gvalue):
	Don't call g_value_init since the other *_to_gvalue
	methods expect an already inited GValue

2006-01-11  Johan Dahlin  <jdahlin@async.com.br>

	* configure.in: Post release version bump

=== PyGTK 2.8.4 ===
2006-01-11  Johan Dahlin  <jdahlin@async.com.br>

	* NEWS: Update.

	* Makefile.am: Only install pygtk.pth if we're building gobject.

2006-01-10  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gtk-types.defs (IconView): should implement gtk.CellLayout

2006-01-09  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* Makefile.am,
	* configure.in,
	* gtk/Makefile.am,
	* tests/Makefile.am: Fix pygobject check; Add external pygobject
	include dir to include path instead of the internal one if
	compiling with pygobject 2.9.

	* Makefile.am: Don't build or install gobject bindings if
	pygobject >= 2.9 was found.

	* configure.in: Check for pygobject 2.9; create an AM conditional
	based on it.

=== PyGTK 2.8.3 ===
2006-01-04  Cedric Gustin  <cedric.gustin@gmail.com>

	* dsextras.py (Template.generate): Pass GLOBAL_MACROS (in
	particular HAVE_PYCAIRO) to codegen DefsParser.
	* setup.py: If pangocairo is enabled, add pycairo to the list of
	packages required to build the GTK+ module. Also set HAVE_PYCAIRO.

2005-12-24  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gobject/pygflags.c (pyg_flags_add): Tolerate module == NULL,
	which may happen when called from pyg_flags_from_gtype if a
	wrapper for the GFlags was not registered.

2005-11-15  Johan Dahlin  <johan@gnome.org>

	* gobject/pygobject.c (pygobject_new_with_interfaces): We always
	need to free interfaces since its a null terminated array.

2005-11-13  Johan Dahlin  <johan@gnome.org>

	* gobject/gobjectmodule.c (pyg_type_register): Remove deprecation
	warning.
	
2005-11-13  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtk.defs (gtk_image_new_from_stock)
	(gtk_image_new_from_icon_set, image_new_from_animation)
	(gtk_image_new_from_icon_name)
	(gtk_radio_menu_item_new_from_widget)
	(gtk_radio_menu_item_new_with_mnemonic_from_widget)
	(gtk_radio_menu_item_new_with_label_from_widget): Add missing
	"(caller-owns-return #t)" -- fixes mem leaks.

2005-11-12  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gdk.override (_wrap_gdk_pixbuf_animation_iter_advance):
	Missing g_object_unref(ret), since caller owns the return value.

2005-11-11  Johan Dahlin  <jdahlin@async.com.br>

	* examples/gtk/sizegroup.py: New example.

2005-11-09  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* gobject/pygobject.c (CHECK_GOBJECT): Use %p formatter instead of 0x%x.

	* gobject/pygobject-private.h (pyg_gil_state_ensure)
	(pyg_gil_state_release): Sync these macro definitions with the
	version in pygobject.h, i.e. don't call pygobject API
	replacements, call the Python API directly.

	* tests/Makefile.am (tests): Add test_glade.py.

	* tests/test_glade.py: Add this file which was missing from CVS.

	* gtk/gtk.defs (gtk_widget_render_icon): Add missing
	"(caller-owns-return #t)" to plug a leak.

2005-11-03  Manish Singh  <yosh@gimp.org> 

	reviewed by: Johan Dahlin  <jdahlin@async.com.br>

	* gobject/gobjectmodule.c: (pyg_integer_richcompare):
	* gobject/pygenum.c: (pyg_enum_richcompare):
	* gobject/pygflags.c: (pyg_flags_richcompare):
	* gobject/pygobject-private.h:
	Prepare for Python 2.5 richcompare changes, fixes #320455.

2005-11-02  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/__init__.py: Remove '' from sys.path if it was added by
	PySys_SetArgv in init_gtk.

2005-10-15  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gtk/gtkobject-support.c (pygtk_custom_destroy_notify): Add
	g_return_if_fail to catch user_data == NULL.

	* gtk/gtktreeview.override (pygtk_set_search_equal_func_marshal):
	Add some NULL parameter checks.  Use PyObject_IsTrue instead of
	comparing agains PyTrue.

2005-10-14  Johan Dahlin  <jdahlin@async.com.br>

	* tests/Makefile.am (tests): 
	* tests/test_gdk.py: Add test

	* gtk/gdk.defs (pixmap_create_from_data)
	(bitmap_create_from_data): use guchar* instead of gchar,
	fixes #318874 (Bob Gibbs)

2005-10-09  Johan Dahlin  <jdahlin@async.com.br>

	* configure.in: post release version bump

=== PyGTK 2.8.2 ===
2005-10-04  Johan Dahlin  <jdahlin@async.com.br>

	* NEWS: Update

2005-10-09  Johan Dahlin  <johan@gnome.org>

	* gobject/pygiochannel.c: (pyg_iowatch_marshal):
	Use GIL state instead of block/unblock. Fixes crasher found
	by Ole Andre Valda Ravnås.

2005-10-04  Johan Dahlin  <jdahlin@async.com.br>

	* configure.in: post release version bump

=== PyGTK 2.8.1 ===
2005-10-04  Johan Dahlin  <jdahlin@async.com.br>

	* NEWS: Update

2005-10-03  Johan Dahlin  <jdahlin@async.com.br>

	* gobject/pygobject.c: (PyGProps_length):
	* gtk/gdk.defs:
	* gtk/gdk.override:
	* gtk/gtk.defs:
	* gtk/gtk.override:
	Fix gcc 4.0 warnings.

2005-10-02  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* tests/test_properties.py (PropertyObject.__gproperties__)
	(PropertyObject.do_get_property, PropertyObject.do_set_property)
	(TestProperties.testUint64): Add guint64 property test case, by
	Johan Dahlin.

	* gobject/pygtype.c (pyg_value_from_pyobject): Accept conversion
	from PyInt (not just PyLong) to guint64.
	(_wrap_g_type_wrapper__get_children): Fix sign/unsigned warning.
	(_wrap_g_type_wrapper__get_interfaces): idem.
	(pyg_value_from_pyobject): idem.

2005-10-01  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* tests/test_subtype.py (TestSubType.testGObjectNewError): Add new
	test for the bug below.

	* gobject/gobjectmodule.c (pyg_object_new): don't unref/sink obj
	if it is NULL.

2005-09-29  Johan Dahlin  <jdahlin@async.com.br>

	* gobject/gobjectmodule.c: (pyg_type_name), (pyg_type_from_name),
	(pyg_type_parent), (pyg_type_is_a), (pyg_type_children),
	(pyg_type_interfaces): Undeprecate for now.

2005-09-28  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* tests/Makefile.am (tests): Add test_textview.py.

	* tests/test_textview.py: Test gtk.TextView.get_default_attributes().

	* gtk/gtktextview.override
	(_wrap_gtk_text_view_get_default_attributes): Override to
	workaround gtk bug #317455.

	* pangomodule.c (initpango): Fix values of pango.SCALE_X_LARGE and
	pango.SCALE_XX_LARGE.

2005-09-25  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* tests/Makefile.am (EXTRA_DIST): Add leak.glade.

	* tests/test_glade.py: Test case for the leak below.

	* gtk/libglade.override (connect_many): Fix a reference leak in 'tuple'.

2005-09-22  Johan Dahlin  <jdahlin@async.com.br>

	* gobject/gobjectmodule.c: (pyg_type_from_name):
	* gobject/pygobject.c: (pygobject_connect),
	(pygobject_connect_after), (pygobject_connect_object),
	(pygobject_connect_object_after), (pygobject_emit),
	(pygobject_stop_emission):
	Include the object and the name of the signal in TypeErrors

2005-09-20  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gtk.defs (Entry.set_completion): Add null-ok

2005-09-16  John Ehresman  <jpe@wingware.com>

	* gtk/gdk.override (_wrap_gdk_event_tp_setattr): Allow subwindow
	to be set for enter & leave notify events.

2005-09-16  John Ehresman  <jpe@wingware.com>

	* gobjectmodule.c (initgobject): Add gobject.Warning Warning subclass
	and redirect all g_log messages for the "GLib", "Glib-GObject", and 
	"GThread" domains to the python warning system

	* pangomodule.c (initpango): Add pango.Warning Warning subclass
	and redirect all g_log messages for the "Pango" domain to the 
	python warning system

	* gtkmodule.c (initgtk): Move gtk Warning subclass from the gdk
	module to the gtk module and added redirections for g_log messages 
	for the "Gdk" and "GdkPixbuf" domains to the python warning system

	* gtk/__init__.py: Set gdk.Warning = gtk.Warning for backward
	compatibility

2005-09-13  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gdk.defs:
	* gtk/gtk.defs:
	* gtk/gtk.override:
	* gtk/gtktextview.override:
	* gtk/gtktreeview.override:
	* gtk/gtkwidget.override:

	Revert Johns latest commit.

2005-09-13  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gobject/gobjectmodule.c (add_properties): Append extra
	information to the exception value strings to help contextualize
	any errors that occur while registering properties.

2005-09-06  John Finlay  <finlay@moeraki.com>

	* gtk/gdk.defs (set_urgency_hint): Add.

	* gtk/gtktreeview.override (_wrap_gtk_tree_view_get_visible_range):
	Add.

	* gtk/gtk.defs (set_drag_dest_item): Allow path to be None.
	(get_visible_range): Add.

2005-09-05  John Finlay  <finlay@moeraki.com>

	* gtk/gtk.defs (set_cursor): Allow cell to be None

	* gtk/gtkwidget.override (_wrap_gtk_drag_source_set_icon_name1): Add.

	* gtk/gtk.defs (gtk_drag_source_set_icon_name): Add as a widget method
	and deprecate function gtk.drag_source_set_icon_name.

	* gtk/gdk.defs (set_icon_name): Add.

	* gtk/gtktextview.override (_wrap_gtk_text_view_get_iter_at_position):
	Add.

	* gtk/gtk.override (_wrap_gtk_clipboard_request_image): Add.

	* gtk/gtk.defs (gtk_alternative_dialog_button_order)
	(gtk_clipboard_request_image, gtk_clipboard_wait_for_image)
	(gtk_clipboard_set_image, gtk_clipboard_wait_is_image_available)
	(drag_source_add_iamge_targets, drag_source_add_uri_targets):
	Add defs.

2005-09-02  Johan Dahlin  <jdahlin@async.com.br>

	* gobject/pygparamspec.c (pyg_param_spec_getattr): Sort all attributes
	alphabetically, like python does. Set default value to None
	(pyg_param_spec_getattr): Add default_values fallback, for backwards
	compatibility.

2005-09-02  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* gobject/gobjectmodule.c (_wrap_pyg_type_register): Don't crash
	when registering non-types.

	* tests/test_subtype.py: Test registering non-types raises
	TypeError.

	Fixes #315100: "gobject.type_register crashes if parameter is not
	a type."

2005-09-02  Johan Dahlin  <jdahlin@async.com.br>

	* gobject/gobjectmodule.c: (pyg_signal_list_names):
	Also include interfaces, fixes #315038

2005-09-02  Johan Dahlin  <jdahlin@async.com.br>

	* configure.in: post release version bump

	* Changelog.pre-2-8: Move old changelog

